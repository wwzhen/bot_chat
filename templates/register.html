<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>注册</title>
    <link rel="stylesheet" href="/static/css/login.css"/>
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
</head>
<body onkeydown="pressRegister()">
<div id="login-box">
    <h1>Register</h1>
    <div class="form">
        <div class="item">
            <i class="fa fa-github-alt" style="font-size:24px"></i>
            <input type="text" id="name" placeholder="Username">
        </div>
        <div class="item">
            <i class="fa fa-search" style="font-size:24px"></i>
            <input type="password" id="password" placeholder="Password">
        </div>
    </div>
    <button onclick="register()">Register</button>
</div>

</body>
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript">
    function register() {
        let name = $("#name").val().trim()
        let password = $("#password").val().trim()
        if (name && password) {
            $.ajax({
                url: '/api/register/',
                type: 'POST',
                data: {
                    "username": name,
                    "password": password
                },
                success: function (res) {
                    if (res.result) {
                        window.location.href = '/'
                    }
                }
            })
        }
    }

    function pressRegister() {
        if (event.keyCode === 13) {
            register()
        }
    }
</script>
</html>